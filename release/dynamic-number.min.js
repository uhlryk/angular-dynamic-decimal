!function(n,e){"use strict";if("function"==typeof define&&define.amd)define(["angular"],e);else{if("undefined"==typeof module||"object"!=typeof module.exports)return e(n.angular);module.exports=e(require("angular"))}}(window,function(n){"use strict";function e(n,e,t,r){if(void 0===n||null===n||""===n)return"";var u="";return u=","===e?String(n).replace(".",","):String(n)}function t(n,e,t){return","===e?String(n).replace(/['\.\s]/g,"").replace(",","."):"."===e?String(n).replace(/[',\s]/g,""):void 0}function r(n,e,t){var r=n;return t&&(r+=t),e&&(r=/^\-.+/.test(r)?r.replace("-","-"+e):/^\-/.test(r)?r:e+r),r}function u(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function i(n,e){if(n>=0){var t=parseInt(n,10);if(isNaN(t)===!1&&isFinite(t)&&t>=0)return t}return e}function a(n,e){return","===n?",":"."===n?".":e}function o(n,e){return"false"!==n&&n!==!1&&("true"===n||n===!0||e)}function c(n,e){return"false"!==n&&n!==!1&&("true"===n||n===!0||e)}function d(n,e){return"floor"===n?Math.floor:"ceil"===n?Math.ceil:"round"===n?Math.round:e}function m(n,e){return"false"!==n&&n!==!1&&("true"===n||n===!0||e)}function s(n){return"true"===n||n===!0}function p(n,e){return"false"!==n&&n!==!1&&("true"===n||n===!0||e)}function f(n,e,t){if(!n)return t;var r;return r="."===e?new RegExp("^[',\\s]$"):new RegExp("^['\\.\\s]$"),r.test(n)?n:t}function g(n){var e=new RegExp("[^\\d,\\.\\s\\-]{1}");return e.test(n)?n:null}function l(n,e,t,r,u){var i="-?";r===!1&&u===!0?i="-":r===!0&&u===!1&&(i="");var a="[0-9]{0,"+n+"}";0===n&&(a="0");var o="(\\"+t+"([0-9]){0,"+e+"})";return 0===e&&(o=""),new RegExp("^"+i+a+o+"?$")}function v(n){return String(n).replace(/^(-?)(0+)$/g,"$10").replace(/^0(\d+)/g,"$1").replace(/^-0(\d+)/g,"-$1").replace(new RegExp("^-([\\.,\\s])","g"),"-0$1").replace(new RegExp("^[\\.,\\s]","g"),"0$&")}function S(n,e,t){var r=n;return e&&(r=r.replace(new RegExp("[\\"+e+"]","g"),"")),t&&(r=r.replace(new RegExp("[\\"+t+"]","g"),"")),r}function h(n,e){return"."===e?String(n).replace(/\./g,""):","===e?String(n).replace(/,/g,""):String(n).replace(new RegExp("['\\s]","g"),"")}function w(n,e,t){return n=String(n).split(e),n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,t),n.join(e)}function x(n,e){var t=n;if(e.isFixed){var r=t.split(e.fractionSeparator)[1],u=r&&r.length?r.length:0;0===u&&(t+=e.fractionSeparator);for(var i=u;i<e.fractionPart;i++)t+="0"}return t}function $(e,t,u,i,a){a&&(i.enable=!1);var o=String(t),c=x(o,u),d=r(c,u.prepend,u.append),m=n.version;1===m.major&&2===m.minor?e.$viewValue=d:e.$setViewValue(d),e.$render()}function b(n,t,u,i,a,o,c,d,m,s){if(""===n||void 0===n||null===n)return"";if(s===!1&&(n=Number(n)),!isNaN(n)&&isFinite(n)){var p=Math.pow(10,t);return n=a?e((i(n*p)/p).toFixed(t),u,d,m):s===!0?e(F(n,t,u,m,i),u,d,m):e(String(i(n*p)/p),u,d,m),n=r(n,d,m),o&&(n=w(n,u,c)),n}return a?(0).toFixed(t):"0"}function F(n,e,t,r,u){if(null==n)return"";if(null==e)return n;var i=n.indexOf(t);if(null!=r){var a=new RegExp(r+"$");n=n.replace(a,"")}if(i!==-1){var o=n.substring(0,i),c=i+1,d=c+e;if(d>=n.length)return n;var m=Number(n[d]),s=u(m/10),p=bigInt(n.substring(c,d))+bigInt(1==s?1:-1),f=p.toString();p>bigInt(0)?f.length>e&&(f=f.substring(1,f.length),o=(bigInt(o)+bigInt(1)).toString()):(o=(bigInt(o)-bigInt(1)).toString(),f="0"),n=o+n[c-1]+N(f,e)}return null!=r&&(n+=r),n}function N(n,e){for(var t=n.length;t<e;t++)n="0"+n;return n}function R(n){var e=0;if(document.selection){n.focus();var t=document.selection.createRange();t.moveStart("character",-n.value.length),e=t.text.length}else(n.selectionStart||"0"==n.selectionStart)&&(e="backward"==n.selectionDirection?n.selectionStart:n.selectionEnd);return e}function P(n,e){if(null!==n)if(n.createTextRange){var t=n.createTextRange();t.move("character",e),t.select()}else n.selectionStart?(n.focus(),n.setSelectionRange(e,e)):n.focus()}function T(n,e,t){for(var r=0,u=0,i=0;i<n.length;i++)if(n[i]!==e){if(r++,r>=t)break}else u++;return u}function y(n,e){var t=n,r=t.split(e.fractionSeparator),u=r[0],i=r[1];return i&&i.length>e.fractionPart&&(i=i.slice(0,e.fractionPart),t=[u,i].join(e.fractionSeparator)),t}function E(n,e){return null===n?null:0==e?Number(n):n}function I(n,e,t){var r={awnum:n.awnum,numInt:n.numInt,numFract:n.numFract,numSep:n.numSep,numPos:n.numPos,numNeg:n.numNeg,numRound:n.numRound,numThousand:n.numThousand,numThousandSep:n.numThousandSep,numPrepend:n.numPrepend,numAppend:n.numAppend,numFixed:n.numFixed,numString:n.numString};return e&&(r[e]=t),r}function A(n,e){return n.replace(new RegExp("[\\"+e.fractionSeparator+"]+","g"),e.fractionSeparator)}function M(n,e,t,r,v){var S={};n.awnum&&(S=v.getStrategy(n.awnum));var h=u(void 0!==n.numInt?n.numInt:S.numInt,6),w=i(void 0!==n.numFract?n.numFract:S.numFract,2),x=a(void 0!==n.numSep?n.numSep:S.numSep,"."),$=o(void 0!==n.numPos?n.numPos:S.numPos,!0),b=c(void 0!==n.numNeg?n.numNeg:S.numNeg,!0),F=d(void 0!==n.numRound?n.numRound:S.numRound,Math.round),N=p(void 0!==n.numThousand?n.numThousand:S.numThousand,!1),R=f(void 0!==n.numThousandSep?n.numThousandSep:S.numThousandSep,x,"."===x?",":"."),P=g(void 0!==n.numPrepend?n.numPrepend:S.numPrepend),T=g(void 0!==n.numAppend?n.numAppend:S.numAppend),y=m(void 0!==n.numFixed?n.numFixed:S.numFixed,!1),E=s(void 0!==n.numString?n.numString:S.numString);if($===!1&&b===!1)throw new Error("Number is set to not be positive and not be negative. Change num_pos attr or/and num_neg attr to true");var I=l(h,w,x,$,b);return{element:e,attrs:t,ngModelController:r,viewRegexTest:I,integerPart:h,fractionPart:w,fractionSeparator:x,isPositiveNumber:$,isNegativeNumber:b,roundFunction:F,isThousandSeparator:N,thousandSeparator:R,prepend:P,append:T,isFixed:y,useString:E}}function V(n,r,u){var i=r.element,a=(r.attrs,r.ngModelController),o=r.viewRegexTest,c=(r.integerPart,r.fractionPart),d=r.fractionSeparator,m=r.isPositiveNumber,s=r.isNegativeNumber,p=(r.roundFunction,r.isThousandSeparator),f=r.thousandSeparator,g=r.prepend,l=r.append,x=(r.isFixed,String(n));if(D){D=!1;var b=new RegExp("[^"+(s?"-":"")+d+f+"0-9]+","g");x=x.replace(b,""),b=new RegExp("^["+d+f+"]"),x=x.replace(b,""),b=new RegExp("["+d+f+"]([0-9]{"+c+"})$"),x=x.replace(b,d+"$1")}if(x=S(x,g,l),x=A(x,r),new RegExp("^[.,"+f+"]{2,}").test(x))return $(a,"",r,u),null;var F=R(i[0]);g&&F--;var N=x.slice(0,F);N=h(N,f),x=h(x,f),N=v(N);var E=x;if(x=v(x),x==="0"+d&&E===d&&m)return c?($(a,""+d,r,u,!0),P(i[0],2),null):($(a,"",r,u),null);if(""===x&&"0"===String(n).charAt(0))return $(a,"",r),null;if(void 0===x||""===x)return $(a,"",r),null;if("-"===x)return m&&!s?$(a,"",r,u):$(a,"-",r,u),null;if(x=y(x,r),o.test(x)===!1){var I=e(a.$modelValue,d,r);return p&&(I=w(I,d,f)),$(a,I,r,u),P(i[0],F-1),a.$modelValue}var M=0,V=N.length;return p&&(x=w(x,d,f),M=T(x,f,V)),g&&(M++,new RegExp("^(\\-\\d)$").test(x)&&(M+=2),new RegExp("^(\\d)$").test(x)&&M++),$(a,x,r,u),P(i[0],V+M),t(x,d,f)}function j(n,e){n.$setViewValue(""),n.$render(),n.$setViewValue(e),n.$render()}function k(n,e){var t=b(n.$modelValue,e.fractionPart,e.fractionSeparator,e.roundFunction,e.isFixed,e.isThousandSeparator,e.thousandSeparator,e.prepend,e.append,e.useString);j(n,t)}function C(n){return{restrict:"A",require:"?ngModel",scope:{awnum:"@",numInt:"@",numFract:"@",numSep:"@",numPos:"@",numNeg:"@",numRound:"@",numThousand:"@",numThousandSep:"@",numPrepend:"@",numAppend:"@",numFixed:"@",numString:"@"},link:function(e,t,r,u){if(!t[0]||"INPUT"!==t[0].tagName||"text"!==t[0].type&&"tel"!==t[0].type)return void console.warn("Directive angular-dynamic-number works only for 'input' tag with type = 'text' or type = 'tel'");if(!u)return void console.warn("Directive angular-dynamic-number need ngModel attribute");var i=M(I(e),t,r,u,n);t.on("paste",function(){D=!0}),e.$watch("numInt",function(a,o){o!==a&&(i=M(I(e,"numInt",a),t,r,u,n),k(u,i))}),e.$watch("numFract",function(a,o){o!==a&&(i=M(I(e,"numFract",a),t,r,u,n),k(u,i))}),e.$watch("numSep",function(a,o){o!==a&&(i=M(I(e,"numSep",a),t,r,u,n),k(u,i))}),e.$watch("numPos",function(a,o){o!==a&&(i=M(I(e,"numPos",a),t,r,u,n),k(u,i))}),e.$watch("numNeg",function(a,o){o!==a&&(i=M(I(e,"numNeg",a),t,r,u,n),k(u,i))}),e.$watch("numThousand",function(a,o){o!==a&&(i=M(I(e,"numThousand",a),t,r,u,n),k(u,i))}),e.$watch("numThousandSep",function(a,o){o!==a&&(i=M(I(e,"numThousandSep",a),t,r,u,n),k(u,i))}),e.$watch("numAppend",function(a,o){o!==a&&(i=M(I(e,"numAppend",a),t,r,u,n),k(u,i))}),e.$watch("numPrepend",function(a,o){o!==a&&(i=M(I(e,"numPrepend",a),t,r,u,n),k(u,i))}),e.$watch("numFixed",function(a,o){o!==a&&(i=M(I(e,"numFixed",a),t,r,u,n),k(u,i))}),e.$watch("numString",function(a,o){o!==a&&(i=M(I(e,"numString",a),t,r,u,n),k(u,i))});var a={enable:!0,count:0};u.$parsers.unshift(function(n){return a.enable?(a.count++,E(V(n,i,a),i.useString)):(a.enable=!0,n)}),u.$formatters.push(function(n){return b(n,i.fractionPart,i.fractionSeparator,i.roundFunction,i.isFixed,i.isThousandSeparator,i.thousandSeparator,i.prepend,i.append,i.useString)})}}}var D=!1,q="dynamicNumber";return n.module(q,[]).provider("dynamicNumberStrategy",function(){function n(n,e){r[n]=e}function e(n){return r[n]}function t(){return r}var r={};this.addStrategy=n,this.getStrategy=e,this.getStrategies=t;var u={addStrategy:n,getStrategy:e,getStrategies:t};this.$get=function(){return u}}).filter("awnum",["dynamicNumberStrategy",function(e){return function(t,r,u,o,c,s,l,v,S,h){var w,x={};n.isString(r)&&(x=e.getStrategy(r),r=x.numFract);var w=i(r,2),$=a(void 0!==u?u:x.numSep,"."),F=d(void 0!==o?o:x.numRound,Math.round),N=m(void 0!==c?c:x.numFixed,!1),R=p(void 0!==s?s:x.numThousand,!1),P=f(void 0!==l?l:x.numThousandSep,$,"."===$?",":"."),T=g(void 0!==v?v:x.numPrepend),y=g(void 0!==S?S:x.numAppend),E=g(void 0!==h?h:x.numString),I=b(t,w,$,F,N,R,P,T,y,E);return""===I?"0":I}}]).directive("awnum",["dynamicNumberStrategy",C]),q});